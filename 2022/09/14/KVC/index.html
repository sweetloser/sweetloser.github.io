<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.gif?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.gif?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.gif?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="iOS开发," />










<meta name="description" content="在OC中，对于属性的访问，setter 和 getter 方法是直接的方式，而KVC（键值编码）则提供了间接访问的API。 KVC（键值编码）是由NSKeyValueCoding非正式协议启用的一种机制，对象采用该协议来提供对其属性的间接访问。当对象符合键-值编码时，它的属性可以通过简洁、统一的消息传递接口通过字符串参数寻址。这种间接访问机制补充了实例变量及其相关访问器方法提供的直接访问。（Key">
<meta property="og:type" content="article">
<meta property="og:title" content="KVC">
<meta property="og:url" content="https://www.sweetloser.com/2022/09/14/KVC/index.html">
<meta property="og:site_name" content="SweetLoser Blog">
<meta property="og:description" content="在OC中，对于属性的访问，setter 和 getter 方法是直接的方式，而KVC（键值编码）则提供了间接访问的API。 KVC（键值编码）是由NSKeyValueCoding非正式协议启用的一种机制，对象采用该协议来提供对其属性的间接访问。当对象符合键-值编码时，它的属性可以通过简洁、统一的消息传递接口通过字符串参数寻址。这种间接访问机制补充了实例变量及其相关访问器方法提供的直接访问。（Key">
<meta property="og:locale">
<meta property="article:published_time" content="2022-09-14T02:25:34.000Z">
<meta property="article:modified_time" content="2024-02-27T07:16:53.485Z">
<meta property="article:author" content="SweetLoser">
<meta property="article:tag" content="iOS开发">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.sweetloser.com/2022/09/14/KVC/"/>





  <title>KVC | SweetLoser Blog</title>
  








<meta name="generator" content="Hexo 6.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SweetLoser Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">树叶的一生，难道只是为了归根吗</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.sweetloser.com/2022/09/14/KVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SweetLoser Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">KVC</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-09-14T10:25:34+08:00">
                2022-09-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/09/14/KVC/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2022/09/14/KVC/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5.7k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  32 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>在OC中，对于属性的访问，setter 和 getter 方法是直接的方式，而KVC（键值编码）则提供了间接访问的API。</p>
<p>KVC（键值编码）是由NSKeyValueCoding非正式协议启用的一种机制，对象采用该协议来提供对其属性的间接访问。当对象符合键-值编码时，它的属性可以通过简洁、统一的消息传递接口通过字符串参数寻址。这种间接访问机制补充了实例变量及其相关访问器方法提供的直接访问。（Key-value coding is a mechanism enabled by the NSKeyValueCoding informal protocol that objects adopt to provide indirect access to their properties. When an object is key-value coding compliant, its properties are addressable via string parameters through a concise, uniform messaging interface. This indirect access mechanism supplements the direct access afforded by instance variables and their associated accessor methods.）</p>
<p>NSKeyValueCoding在源码中的定义如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">	NSKeyValueCoding.h</span><br><span class="line">	Copyright (c) 1994-2019, Apple Inc. All rights reserved.</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/NSArray.h&gt;</span><br><span class="line">#import &lt;Foundation/NSDictionary.h&gt;</span><br><span class="line">#import &lt;Foundation/NSOrderedSet.h&gt;</span><br><span class="line">#import &lt;Foundation/NSSet.h&gt;</span><br><span class="line">#import &lt;Foundation/NSException.h&gt;</span><br><span class="line"></span><br><span class="line">@class NSError, NSString;</span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_BEGIN</span><br><span class="line"></span><br><span class="line">/* The exception that is thrown when a key value coding operation fails. The exception&#x27;s user info dictionary will contain at least two entries:</span><br><span class="line">    - @&quot;NSTargetObjectUserInfoKey&quot;: the receiver of the failed KVC message.</span><br><span class="line">    - @&quot;NSUnknownUserInfoKey&quot;: the key that was used in the failed KVC message.</span><br><span class="line"></span><br><span class="line">The actual value of this constant string is &quot;NSUnknownKeyException,&quot; to match the exceptions that are thrown by KVC methods that were deprecated in Mac OS 10.3.</span><br><span class="line">*/</span><br><span class="line">FOUNDATION_EXPORT NSExceptionName const NSUndefinedKeyException;</span><br><span class="line"></span><br><span class="line">typedef NSString * NSKeyValueOperator NS_TYPED_ENUM;</span><br><span class="line"></span><br><span class="line">/* Strings for the names of array operators supported by key-value coding. Only these string declarations are new in Mac OS 10.4. The actual support for array operators appeared in Mac OS 10.3. The values of these do not include &quot;@&quot; prefixes.</span><br><span class="line">*/</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSAverageKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSCountKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSDistinctUnionOfArraysKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSDistinctUnionOfObjectsKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSDistinctUnionOfSetsKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSMaximumKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSMinimumKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSSumKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSUnionOfArraysKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSUnionOfObjectsKeyValueOperator;</span><br><span class="line">FOUNDATION_EXPORT NSKeyValueOperator const NSUnionOfSetsKeyValueOperator;</span><br><span class="line"></span><br><span class="line">@interface NSObject(NSKeyValueCoding)</span><br><span class="line"></span><br><span class="line">/* Return YES if -valueForKey:, -setValue:forKey:, -mutableArrayValueForKey:, -storedValueForKey:, -takeStoredValue:forKey:, and -takeValue:forKey: may directly manipulate instance variables when sent to instances of the receiving class, NO otherwise. The default implementation of this property returns YES.</span><br><span class="line">*/</span><br><span class="line">@property (class, readonly) BOOL accessInstanceVariablesDirectly;</span><br><span class="line"></span><br><span class="line">/* Given a key that identifies an attribute or to-one relationship, return the attribute value or the related object. Given a key that identifies a to-many relationship, return an immutable array or an immutable set that contains all of the related objects.</span><br><span class="line">    </span><br><span class="line">The default implementation of this method does the following:</span><br><span class="line">    1. Searches the class of the receiver for an accessor method whose name matches the pattern -get&lt;Key&gt;, -&lt;key&gt;, or -is&lt;Key&gt;, in that order. If such a method is found it is invoked. If the type of the method&#x27;s result is an object pointer type the result is simply returned. If the type of the result is one of the scalar types supported by NSNumber conversion is done and an NSNumber is returned. Otherwise, conversion is done and an NSValue is returned (new in Mac OS 10.5: results of arbitrary type are converted to NSValues, not just NSPoint, NRange, NSRect, and NSSize).</span><br><span class="line">    2 (introduced in Mac OS 10.7). Otherwise (no simple accessor method is found), searches the class of the receiver for methods whose names match the patterns -countOf&lt;Key&gt; and -indexIn&lt;Key&gt;OfObject: and -objectIn&lt;Key&gt;AtIndex: (corresponding to the primitive methods defined by the NSOrderedSet class) and also -&lt;key&gt;AtIndexes: (corresponding to -[NSOrderedSet objectsAtIndexes:]). If a count method and an indexOf method and at least one of the other two possible methods are found, a collection proxy object that responds to all NSOrderedSet methods is returned. Each NSOrderedSet message sent to the collection proxy object will result in some combination of -countOf&lt;Key&gt;, -indexIn&lt;Key&gt;OfObject:, -objectIn&lt;Key&gt;AtIndex:, and -&lt;key&gt;AtIndexes: messages being sent to the original receiver of -valueForKey:. If the class of the receiver also implements an optional method whose name matches the pattern -get&lt;Key&gt;:range: that method will be used when appropriate for best performance.</span><br><span class="line">    3. Otherwise (no simple accessor method or set of ordered set access methods is found), searches the class of the receiver for methods whose names match the patterns -countOf&lt;Key&gt; and -objectIn&lt;Key&gt;AtIndex: (corresponding to the primitive methods defined by the NSArray class) and (introduced in Mac OS 10.4) also -&lt;key&gt;AtIndexes: (corresponding to -[NSArray objectsAtIndexes:]). If a count method and at least one of the other two possible methods are found, a collection proxy object that responds to all NSArray methods is returned. Each NSArray message sent to the collection proxy object will result in some combination of -countOf&lt;Key&gt;, -objectIn&lt;Key&gt;AtIndex:, and -&lt;key&gt;AtIndexes: messages being sent to the original receiver of -valueForKey:. If the class of the receiver also implements an optional method whose name matches the pattern -get&lt;Key&gt;:range: that method will be used when appropriate for best performance.</span><br><span class="line">    4 (introduced in Mac OS 10.4). Otherwise (no simple accessor method or set of ordered set or array access methods is found), searches the class of the receiver for a threesome of methods whose names match the patterns -countOf&lt;Key&gt;, -enumeratorOf&lt;Key&gt;, and -memberOf&lt;Key&gt;: (corresponding to the primitive methods defined by the NSSet class). If all three such methods are found a collection proxy object that responds to all NSSet methods is returned. Each NSSet message sent to the collection proxy object will result in some combination of -countOf&lt;Key&gt;, -enumeratorOf&lt;Key&gt;, and -memberOf&lt;Key&gt;: messages being sent to the original receiver of -valueForKey:.</span><br><span class="line">    5. Otherwise (no simple accessor method or set of collection access methods is found), if the receiver&#x27;s class&#x27; +accessInstanceVariablesDirectly property returns YES, searches the class of the receiver for an instance variable whose name matches the pattern _&lt;key&gt;, _is&lt;Key&gt;, &lt;key&gt;, or is&lt;Key&gt;, in that order. If such an instance variable is found, the value of the instance variable in the receiver is returned, with the same sort of conversion to NSNumber or NSValue as in step 1.</span><br><span class="line">    6. Otherwise (no simple accessor method, set of collection access methods, or instance variable is found), invokes -valueForUndefinedKey: and returns the result. The default implementation of -valueForUndefinedKey: raises an NSUndefinedKeyException, but you can override it in your application.</span><br><span class="line"></span><br><span class="line">Compatibility notes:</span><br><span class="line">    - For backward binary compatibility, an accessor method whose name matches the pattern -_get&lt;Key&gt;, or -_&lt;key&gt; is searched for between steps 1 and 3. If such a method is found it is invoked, with the same sort of conversion to NSNumber or NSValue as in step 1. KVC accessor methods whose names start with underscores were deprecated as of Mac OS 10.3 though.</span><br><span class="line">    - The behavior described in step 5 is a change from Mac OS 10.2, in which the instance variable search order was &lt;key&gt;, _&lt;key&gt;.</span><br><span class="line">    - For backward binary compatibility, -handleQueryWithUnboundKey: will be invoked instead of -valueForUndefinedKey: in step 6, if the implementation of -handleQueryWithUnboundKey: in the receiver&#x27;s class is not NSObject&#x27;s.</span><br><span class="line">*/</span><br><span class="line">- (nullable id)valueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Given a value and a key that identifies an attribute, set the value of the attribute. Given an object and a key that identifies a to-one relationship, relate the object to the receiver, unrelating the previously related object if there was one. Given a collection object and a key that identifies a to-many relationship, relate the objects contained in the collection to the receiver, unrelating previously related objects if there were any.</span><br><span class="line"></span><br><span class="line">The default implementation of this method does the following:</span><br><span class="line">    1. Searches the class of the receiver for an accessor method whose name matches the pattern -set&lt;Key&gt;:. If such a method is found the type of its parameter is checked. If the parameter type is not an object pointer type but the value is nil -setNilValueForKey: is invoked. The default implementation of -setNilValueForKey: raises an NSInvalidArgumentException, but you can override it in your application. Otherwise, if the type of the method&#x27;s parameter is an object pointer type the method is simply invoked with the value as the argument. If the type of the method&#x27;s parameter is some other type the inverse of the NSNumber/NSValue conversion done by -valueForKey: is performed before the method is invoked.</span><br><span class="line">    2. Otherwise (no accessor method is found), if the receiver&#x27;s class&#x27; +accessInstanceVariablesDirectly property returns YES, searches the class of the receiver for an instance variable whose name matches the pattern _&lt;key&gt;, _is&lt;Key&gt;, &lt;key&gt;, or is&lt;Key&gt;, in that order. If such an instance variable is found and its type is an object pointer type the value is retained and the result is set in the instance variable, after the instance variable&#x27;s old value is first released. If the instance variable&#x27;s type is some other type its value is set after the same sort of conversion from NSNumber or NSValue as in step 1.</span><br><span class="line">    3. Otherwise (no accessor method or instance variable is found), invokes -setValue:forUndefinedKey:. The default implementation of -setValue:forUndefinedKey: raises an NSUndefinedKeyException, but you can override it in your application.</span><br><span class="line"></span><br><span class="line">Compatibility notes:</span><br><span class="line">    - For backward binary compatibility with -takeValue:forKey:&#x27;s behavior, a method whose name matches the pattern -_set&lt;Key&gt;: is also recognized in step 1. KVC accessor methods whose names start with underscores were deprecated as of Mac OS 10.3 though.</span><br><span class="line">    - For backward binary compatibility, -unableToSetNilForKey: will be invoked instead of -setNilValueForKey: in step 1, if the implementation of -unableToSetNilForKey: in the receiver&#x27;s class is not NSObject&#x27;s.</span><br><span class="line">    - The behavior described in step 2 is different from -takeValue:forKey:&#x27;s, in which the instance variable search order is &lt;key&gt;, _&lt;key&gt;.</span><br><span class="line">    - For backward binary compatibility with -takeValue:forKey:&#x27;s behavior, -handleTakeValue:forUnboundKey: will be invoked instead of -setValue:forUndefinedKey: in step 3, if the implementation of -handleTakeValue:forUnboundKey: in the receiver&#x27;s class is not NSObject&#x27;s.</span><br><span class="line">*/</span><br><span class="line">- (void)setValue:(nullable id)value forKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Given a pointer to a value pointer, a key that identifies an attribute or to-one relationship, and a pointer to an NSError pointer, return a value that is suitable for use in subsequent -setValue:forKey: messages sent to the same receiver. If no validation is necessary, return YES without altering *ioValue or *outError. If validation is necessary and possible, return YES after setting *ioValue to an object that is the validated version of the original value, but without altering *outError. If validation is necessary but not possible, return NO after setting *outError to an NSError that encapsulates the reason that validation was not possible, but without altering *ioValue. The sender of the message is never given responsibility for releasing ioValue or outError.</span><br><span class="line"></span><br><span class="line">The default implementation of this method searches the class of the receiver for a validator method whose name matches the pattern -validate&lt;Key&gt;:error:. If such a method is found it is invoked and the result is returned. If no such method is found, YES is returned.</span><br><span class="line">*/</span><br><span class="line">- (BOOL)validateValue:(inout id _Nullable * _Nonnull)ioValue forKey:(NSString *)inKey error:(out NSError **)outError;</span><br><span class="line"></span><br><span class="line">/* Given a key that identifies an _ordered_ to-many relationship, return a mutable array that provides read-write access to the related objects. Objects added to the mutable array will become related to the receiver, and objects removed from the mutable array will become unrelated.</span><br><span class="line"></span><br><span class="line">The default implementation of this method recognizes the same simple accessor methods and array accessor methods as -valueForKey:&#x27;s, and follows the same direct instance variable access policies, but always returns a mutable collection proxy object instead of the immutable collection that -valueForKey: would return. It also:</span><br><span class="line">    1. Searches the class of the receiver for methods whose names match the patterns -insertObject:in&lt;Key&gt;AtIndex: and -removeObjectFrom&lt;Key&gt;AtIndex: (corresponding to the two most primitive methods defined by the NSMutableArray class), and (introduced in Mac OS 10.4) also -insert&lt;Key&gt;:atIndexes: and -remove&lt;Key&gt;AtIndexes: (corresponding to -[NSMutableArray insertObjects:atIndexes:] and -[NSMutableArray removeObjectsAtIndexes:). If at least one insertion method and at least one removal method are found each NSMutableArray message sent to the collection proxy object will result in some combination of -insertObject:in&lt;Key&gt;AtIndex:, -removeObjectFrom&lt;Key&gt;AtIndex:, -insert&lt;Key&gt;:atIndexes:, and -remove&lt;Key&gt;AtIndexes: messages being sent to the original receiver of -mutableArrayValueForKey:. If the class of the receiver also implements an optional method whose name matches the pattern -replaceObjectIn&lt;Key&gt;AtIndex:withObject: or (introduced in Mac OS 10.4) -replace&lt;Key&gt;AtIndexes:with&lt;Key&gt;: that method will be used when appropriate for best performance.</span><br><span class="line">    2. Otherwise (no set of array mutation methods is found), searches the class of the receiver for an accessor method whose name matches the pattern -set&lt;Key&gt;:. If such a method is found each NSMutableArray message sent to the collection proxy object will result in a -set&lt;Key&gt;: message being sent to the original receiver of -mutableArrayValueForKey:.</span><br><span class="line">    3. Otherwise (no set of array mutation methods or simple accessor method is found), if the receiver&#x27;s class&#x27; +accessInstanceVariablesDirectly property returns YES, searches the class of the receiver for an instance variable whose name matches the pattern _&lt;key&gt; or &lt;key&gt;, in that order. If such an instance variable is found, each NSMutableArray message sent to the collection proxy object will be forwarded to the instance variable&#x27;s value, which therefore must typically be an instance of NSMutableArray or a subclass of NSMutableArray.</span><br><span class="line">    4. Otherwise (no set of array mutation methods, simple accessor method, or instance variable is found), returns a mutable collection proxy object anyway. Each NSMutableArray message sent to the collection proxy object will result in a -setValue:forUndefinedKey: message being sent to the original receiver of -mutableArrayValueForKey:. The default implementation of -setValue:forUndefinedKey: raises an NSUndefinedKeyException, but you can override it in your application.</span><br><span class="line"></span><br><span class="line">Performance note: the repetitive -set&lt;Key&gt;: messages implied by step 2&#x27;s description are a potential performance problem. For better performance implement insertion and removal methods that fulfill the requirements for step 1 in your KVC-compliant class. For best performance implement a replacement method too.</span><br><span class="line">*/</span><br><span class="line">- (NSMutableArray *)mutableArrayValueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Given a key that identifies an _ordered_ and uniquing to-many relationship, return a mutable ordered set that provides read-write access to the related objects. Objects added to the mutable ordered set will become related to the receiver, and objects removed from the mutable ordered set will become unrelated.</span><br><span class="line"></span><br><span class="line">The default implementation of this method recognizes the same simple accessor methods and ordered set accessor methods as -valueForKey:&#x27;s, and follows the same direct instance variable access policies, but always returns a mutable collection proxy object instead of the immutable collection that -valueForKey: would return. It also:</span><br><span class="line">    1. Searches the class of the receiver for methods whose names match the patterns -insertObject:in&lt;Key&gt;AtIndex: and -removeObjectFrom&lt;Key&gt;AtIndex: (corresponding to the two most primitive methods defined by the NSMutableOrderedSet class), and also -insert&lt;Key&gt;:atIndexes: and -remove&lt;Key&gt;AtIndexes: (corresponding to -[NSMutableOrderedSet insertObjects:atIndexes:] and -[NSMutableOrderedSet removeObjectsAtIndexes:). If at least one insertion method and at least one removal method are found each NSMutableOrderedSet message sent to the collection proxy object will result in some combination of -insertObject:in&lt;Key&gt;AtIndex:, -removeObjectFrom&lt;Key&gt;AtIndex:, -insert&lt;Key&gt;:atIndexes:, and -remove&lt;Key&gt;AtIndexes: messages being sent to the original receiver of -mutableOrderedSetValueForKey:. If the class of the receiver also implements an optional method whose name matches the pattern -replaceObjectIn&lt;Key&gt;AtIndex:withObject: or -replace&lt;Key&gt;AtIndexes:with&lt;Key&gt;: that method will be used when appropriate for best performance.</span><br><span class="line">    2. Otherwise (no set of ordered set mutation methods is found), searches the class of the receiver for an accessor method whose name matches the pattern -set&lt;Key&gt;:. If such a method is found each NSMutableOrderedSet message sent to the collection proxy object will result in a -set&lt;Key&gt;: message being sent to the original receiver of -mutableOrderedSetValueForKey:.</span><br><span class="line">    3. Otherwise (no set of ordered set mutation methods or simple accessor method is found), if the receiver&#x27;s class&#x27; +accessInstanceVariablesDirectly property returns YES, searches the class of the receiver for an instance variable whose name matches the pattern _&lt;key&gt; or &lt;key&gt;, in that order. If such an instance variable is found, each NSMutableOrderedSet message sent to the collection proxy object will be forwarded to the instance variable&#x27;s value, which therefore must typically be an instance of NSMutableOrderedSet or a subclass of NSMutableOrderedSet.</span><br><span class="line">    4. Otherwise (no set of ordered set mutation methods, simple accessor method, or instance variable is found), returns a mutable collection proxy object anyway. Each NSMutableOrderedSet message sent to the collection proxy object will result in a -setValue:forUndefinedKey: message being sent to the original receiver of -mutableOrderedSetValueForKey:. The default implementation of -setValue:forUndefinedKey: raises an NSUndefinedKeyException, but you can override it in your application.</span><br><span class="line"></span><br><span class="line">Performance note: the repetitive -set&lt;Key&gt;: messages implied by step 2&#x27;s description are a potential performance problem. For better performance implement insertion and removal methods that fulfill the requirements for step 1 in your KVC-compliant class. For best performance implement a replacement method too.</span><br><span class="line">*/</span><br><span class="line">- (NSMutableOrderedSet *)mutableOrderedSetValueForKey:(NSString *)key API_AVAILABLE(macos(10.7), ios(5.0), watchos(2.0), tvos(9.0));</span><br><span class="line"></span><br><span class="line">/* Given a key that identifies an _unordered_ and uniquing to-many relationship, return a mutable set that provides read-write access to the related objects. Objects added to the mutable set will become related to the receiver, and objects removed from the mutable set will become unrelated.</span><br><span class="line"></span><br><span class="line">The default implementation of this method recognizes the same simple accessor methods and set accessor methods as -valueForKey:&#x27;s, and follows the same direct instance variable access policies, but always returns a mutable collection proxy object instead of the immutable collection that -valueForKey: would return. It also:</span><br><span class="line">    1. Searches the class of the receiver for methods whose names match the patterns -add&lt;Key&gt;Object: and -remove&lt;Key&gt;Object: (corresponding to the two primitive methods defined by the NSMutableSet class) and also -add&lt;Key&gt;: and -remove&lt;Key&gt;: (corresponding to -[NSMutableSet unionSet:] and -[NSMutableSet minusSet:]). If at least one addition method and at least one removal method are found each NSMutableSet message sent to the collection proxy object will result in some combination of -add&lt;Key&gt;Object:, -remove&lt;Key&gt;Object:, -add&lt;Key&gt;:, and -remove&lt;Key&gt;: messages being sent to the original receiver of -mutableSetValueForKey:. If the class of the receiver also implements an optional method whose name matches the pattern -intersect&lt;Key&gt;: or -set&lt;Key&gt;: that method will be used when appropriate for best performance.</span><br><span class="line">    2. Otherwise (no set of set mutation methods is found), searches the class of the receiver for an accessor method whose name matches the pattern -set&lt;Key&gt;:. If such a method is found each NSMutableSet message sent to the collection proxy object will result in a -set&lt;Key&gt;: message being sent to the original receiver of -mutableSetValueForKey:.</span><br><span class="line">    3. Otherwise (no set of set mutation methods or simple accessor method is found), if the receiver&#x27;s class&#x27; +accessInstanceVariablesDirectly property returns YES, searches the class of the receiver for an instance variable whose name matches the pattern _&lt;key&gt; or &lt;key&gt;, in that order. If such an instance variable is found, each NSMutableSet message sent to the collection proxy object will be forwarded to the instance variable&#x27;s value, which therefore must typically be an instance of NSMutableSet or a subclass of NSMutableSet.</span><br><span class="line">    4. Otherwise (no set of set mutation methods, simple accessor method, or instance variable is found), returns a mutable collection proxy object anyway. Each NSMutableSet message sent to the collection proxy object will result in a -setValue:forUndefinedKey: message being sent to the original receiver of -mutableSetValueForKey:. The default implementation of -setValue:forUndefinedKey: raises an NSUndefinedKeyException, but you can override it in your application.</span><br><span class="line"></span><br><span class="line">Performance note: the repetitive -set&lt;Key&gt;: messages implied by step 2&#x27;s description are a potential performance problem. For better performance implement methods that fulfill the requirements for step 1 in your KVC-compliant class.</span><br><span class="line">*/</span><br><span class="line">- (NSMutableSet *)mutableSetValueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Key-path-taking variants of like-named methods. The default implementation of each parses the key path enough to determine whether or not it has more than one component (key path components are separated by periods). If so, -valueForKey: is invoked with the first key path component as the argument, and the method being invoked is invoked recursively on the result, with the remainder of the key path passed as an argument. If not, the like-named non-key-path-taking method is invoked.</span><br><span class="line">*/</span><br><span class="line">- (nullable id)valueForKeyPath:(NSString *)keyPath;</span><br><span class="line">- (void)setValue:(nullable id)value forKeyPath:(NSString *)keyPath;</span><br><span class="line">- (BOOL)validateValue:(inout id _Nullable * _Nonnull)ioValue forKeyPath:(NSString *)inKeyPath error:(out NSError **)outError;</span><br><span class="line">- (NSMutableArray *)mutableArrayValueForKeyPath:(NSString *)keyPath;</span><br><span class="line">- (NSMutableOrderedSet *)mutableOrderedSetValueForKeyPath:(NSString *)keyPath API_AVAILABLE(macos(10.7), ios(5.0), watchos(2.0), tvos(9.0));</span><br><span class="line">- (NSMutableSet *)mutableSetValueForKeyPath:(NSString *)keyPath;</span><br><span class="line"></span><br><span class="line">/* Given that an invocation of -valueForKey: would be unable to get a keyed value using its default access mechanism, return the keyed value using some other mechanism. The default implementation of this method raises an NSUndefinedKeyException. You can override it to handle properties that are dynamically defined at run-time.</span><br><span class="line">*/</span><br><span class="line">- (nullable id)valueForUndefinedKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Given that an invocation of -setValue:forKey: would be unable to set the keyed value using its default mechanism, set the keyed value using some other mechanism. The default implementation of this method raises an NSUndefinedKeyException. You can override it to handle properties that are dynamically defined at run-time.</span><br><span class="line">*/</span><br><span class="line">- (void)setValue:(nullable id)value forUndefinedKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Given that an invocation of -setValue:forKey: would be unable to set the keyed value because the type of the parameter of the corresponding accessor method is an NSNumber scalar type or NSValue structure type but the value is nil, set the keyed value using some other mechanism. The default implementation of this method raises an NSInvalidArgumentException. You can override it to map nil values to something meaningful in the context of your application.</span><br><span class="line">*/</span><br><span class="line">- (void)setNilValueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Given an array of keys, return a dictionary containing the keyed attribute values, to-one-related objects, and/or collections of to-many-related objects. Entries for which -valueForKey: returns nil have NSNull as their value in the returned dictionary.</span><br><span class="line">*/</span><br><span class="line">- (NSDictionary&lt;NSString *, id&gt; *)dictionaryWithValuesForKeys:(NSArray&lt;NSString *&gt; *)keys;</span><br><span class="line"></span><br><span class="line">/* Given a dictionary containing keyed attribute values, to-one-related objects, and/or collections of to-many-related objects, set the keyed values. Dictionary entries whose values are NSNull result in -setValue:nil forKey:key messages being sent to the receiver.</span><br><span class="line">*/</span><br><span class="line">- (void)setValuesForKeysWithDictionary:(NSDictionary&lt;NSString *, id&gt; *)keyedValues;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface NSArray&lt;ObjectType&gt;(NSKeyValueCoding)</span><br><span class="line"></span><br><span class="line">/* Return an array containing the results of invoking -valueForKey: on each of the receiver&#x27;s elements. The returned array will contain NSNull elements for each instance of -valueForKey: returning nil.</span><br><span class="line">*/</span><br><span class="line">- (id)valueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Invoke -setValue:forKey: on each of the receiver&#x27;s elements.</span><br><span class="line">*/</span><br><span class="line">- (void)setValue:(nullable id)value forKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface NSDictionary&lt;KeyType, ObjectType&gt;(NSKeyValueCoding)</span><br><span class="line"></span><br><span class="line">/* Return the result of sending -objectForKey: to the receiver.</span><br><span class="line">*/</span><br><span class="line">- (nullable ObjectType)valueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface NSMutableDictionary&lt;KeyType, ObjectType&gt;(NSKeyValueCoding)</span><br><span class="line"></span><br><span class="line">/* Send -setObject:forKey: to the receiver, unless the value is nil, in which case send -removeObjectForKey:.</span><br><span class="line">*/</span><br><span class="line">- (void)setValue:(nullable ObjectType)value forKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface NSOrderedSet&lt;ObjectType&gt;(NSKeyValueCoding)</span><br><span class="line"></span><br><span class="line">/* Return an ordered set containing the results of invoking -valueForKey: on each of the receiver&#x27;s members. The returned ordered set might not have the same number of members as the receiver. The returned ordered set will not contain any elements corresponding to instances of -valueForKey: returning nil, nor will it contain duplicates.</span><br><span class="line">*/</span><br><span class="line">- (id)valueForKey:(NSString *)key API_AVAILABLE(macos(10.7), ios(5.0), watchos(2.0), tvos(9.0));</span><br><span class="line"></span><br><span class="line">/* Invoke -setValue:forKey: on each of the receiver&#x27;s members.</span><br><span class="line">*/</span><br><span class="line">- (void)setValue:(nullable id)value forKey:(NSString *)key API_AVAILABLE(macos(10.7), ios(5.0), watchos(2.0), tvos(9.0));</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface NSSet&lt;ObjectType&gt;(NSKeyValueCoding)</span><br><span class="line"></span><br><span class="line">/* Return a set containing the results of invoking -valueForKey: on each of the receiver&#x27;s members. The returned set might not have the same number of members as the receiver. The returned set will not contain any elements corresponding to instances of -valueForKey: returning nil (in contrast with -[NSArray(NSKeyValueCoding) valueForKey:], which may put NSNulls in the arrays it returns).</span><br><span class="line">*/</span><br><span class="line">- (id)valueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">/* Invoke -setValue:forKey: on each of the receiver&#x27;s members.</span><br><span class="line">*/</span><br><span class="line">- (void)setValue:(nullable id)value forKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">#if TARGET_OS_OSX</span><br><span class="line"></span><br><span class="line">@interface NSObject(NSDeprecatedKeyValueCoding)</span><br><span class="line"></span><br><span class="line">/* Methods that were deprecated in Mac OS 10.4.</span><br><span class="line">*/</span><br><span class="line">+ (BOOL)useStoredAccessor API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.4), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line">- (nullable id)storedValueForKey:(NSString *)key API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.4), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line">- (void)takeStoredValue:(nullable id)value forKey:(NSString *)key API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.4), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line"></span><br><span class="line">/* Methods that were deprecated in Mac OS 10.3. Use the new, more consistently named, methods declared above instead.</span><br><span class="line">*/</span><br><span class="line">- (void)takeValue:(nullable id)value forKey:(NSString *)key API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.3), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line">- (void)takeValue:(nullable id)value forKeyPath:(NSString *)keyPath API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.3), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line">- (nullable id)handleQueryWithUnboundKey:(NSString *)key API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.3), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line">- (void)handleTakeValue:(nullable id)value forUnboundKey:(NSString *)key API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.3), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line">- (void)unableToSetNilForKey:(NSString *)key API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.3), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line">- (NSDictionary *)valuesForKeys:(NSArray *)keys API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.3), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line">- (void)takeValuesFromDictionary:(NSDictionary *)properties API_DEPRECATED(&quot;Legacy KVC API&quot;, macos(10.0,10.3), ios(2.0,2.0), watchos(2.0,2.0), tvos(9.0,9.0));</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_END</span><br></pre></td></tr></table></figure>

<p>从定义可以看出，说是一组协议，事实上，它是一组分类，为NSObject类和集合类扩展并实现了KVC（键值编码）相关的API。</p>
<h5 id="Getter的搜索模式（Search-Pattern-for-the-Basic-Getter）"><a href="#Getter的搜索模式（Search-Pattern-for-the-Basic-Getter）" class="headerlink" title="Getter的搜索模式（Search Pattern for the Basic Getter）"></a>Getter的搜索模式（Search Pattern for the Basic Getter）</h5><p>给定一个key形参作为输入，valueForKey:的默认实现执行以下过程:</p>
<ol>
<li><p>首先在实例中搜索名称为get<code>&lt;Key&gt;</code>， <code>&lt;Key&gt;</code>， is<code>&lt;Key&gt;</code>，或 <code>_&lt;Key&gt;</code> 的访问器方法，按此顺序。如果找到，调用它并带着结果进行步骤5。否则进行下一步；</p>
</li>
<li><p>如果没有找到简单的访问器方法，在实例中搜索其名称匹配模式countOf<code>&lt;Key&gt;</code>和objectIn<code>&lt;Key&gt;</code>AtIndex:(对应NSArray类定义的原始方法)和<code>&lt;Key&gt;</code> AtIndexes:(对应NSArray方法objectsAtIndexes:)的方法。</p>
<p>如果找到了其中的第一个和其他两个中的至少一个，创建一个集合代理对象来响应所有NSArray方法并返回该对象。否则，请执行步骤3。</p>
<p>代理对象随后将它接收到的任何NSArray消息转换为countOf<code>&lt;Key&gt;</code>、objectIn<code>&lt;Key&gt;</code>AtIndex:和<code>&lt;Key&gt;</code> AtIndexes:消息的某种组合，并将这些消息转换为创建它的键值编码兼容的对象。如果原始对象还实现了一个名为get<code>&lt;Key&gt;</code>:range:的可选方法，代理对象也会在适当的时候使用该方法。实际上，代理对象与键值编码兼容的对象一起工作，允许底层属性的行为就像NSArray一样，即使它不是。</p>
</li>
<li><p>如果没有找到简单的访问器方法或数组访问方法组，则查找名为countOf<code>&lt;Key&gt;</code>、enumeratorOf<code>&lt;Key&gt;</code>和memberOf<code>&lt;Key&gt;</code>:(对应于NSSet类定义的原语方法)的三个方法。</p>
<p>如果找到了所有三个方法，则创建一个集合代理对象来响应所有NSSet方法并返回该对象。否则，请执行步骤4。</p>
<p>该代理对象随后将它接收到的任何NSSet消息转换为countOf<code>&lt;Key&gt;</code>、enumeratorOf<code>&lt;Key&gt;</code>和memberOf<code>&lt;Key&gt;</code>:消息的某种组合到创建它的对象。实际上，与键值编码兼容的对象一起工作的代理对象允许底层属性的行为就像它是一个NSSet，即使它不是。</p>
</li>
<li><p>如果没有找到简单访问器方法或集合访问方法组，并且如果接收方的类方法accessinstancevariablesdirect返回YES，则按此顺序搜索一个名为<code>_&lt;key&gt;</code>， _is<code>&lt; key&gt;</code>， <code>&lt;key&gt;</code>，或 is<code>&lt;key&gt;</code>的实例变量。如果找到，直接获取实例变量的值，然后执行步骤5。否则，执行步骤6。</p>
</li>
<li><p>如果检索到的属性值是一个对象指针，则只需返回结果。</p>
<p>如果该值是NSNumber支持的标量类型，则将其存储在NSNumber实例中并返回该值。</p>
<p>如果结果是NSNumber不支持的标量类型，则转换为NSValue对象并返回。</p>
</li>
<li><p>如果所有这些都失败了，调用valueForUndefinedKey:。默认情况下这会引发异常，但NSObject的子类可以提供特定于键的行为。</p>
</li>
</ol>
<h5 id="Setter的搜索模式（Search-Pattern-for-the-Basic-Setter）"><a href="#Setter的搜索模式（Search-Pattern-for-the-Basic-Setter）" class="headerlink" title="Setter的搜索模式（Search Pattern for the Basic Setter）"></a>Setter的搜索模式（Search Pattern for the Basic Setter）</h5><p>setValue:forKey:的默认实现，给定键和值参数作为输入，尝试在接收调用的对象内部将名为key的属性设置为value。其实现遵循以下流程：</p>
<ol>
<li>按此顺序查找第一个名为set<code>&lt;Key&gt;</code>:或_set<code>&lt;Key&gt;</code>的访问器。如果找到，就用输入值(或根据需要解包value)调用它并完成。</li>
<li>如果没有找到简单的访问器，并且类方法accessinstancevariablesdirect返回YES，则查找名称类似于<code>_&lt;key&gt;</code>、_is<code>&lt;key&gt;</code>、<code>&lt;key&gt;</code>或is<code>&lt;key&gt;</code>的实例变量。如果找到，直接用输入值(或解包值)设置变量并完成。</li>
<li>在没有找到访问器或实例变量时，调用setValue:forUndefinedKey:。默认情况下这会引发异常，但NSObject的子类可以提供特定于键的行为。</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS%E5%BC%80%E5%8F%91/" rel="tag"><i class="fa fa-tag"></i> iOS开发</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2022/09/09/MVC/" rel="next" title="MVC">
                <i class="fa fa-chevron-left"></i> MVC
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2022/09/14/KVO/" rel="prev" title="KVO">
                KVO <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/">
              
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/sweetloser" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#Getter%E7%9A%84%E6%90%9C%E7%B4%A2%E6%A8%A1%E5%BC%8F%EF%BC%88Search-Pattern-for-the-Basic-Getter%EF%BC%89"><span class="nav-number">1.</span> <span class="nav-text">Getter的搜索模式（Search Pattern for the Basic Getter）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Setter%E7%9A%84%E6%90%9C%E7%B4%A2%E6%A8%A1%E5%BC%8F%EF%BC%88Search-Pattern-for-the-Basic-Setter%EF%BC%89"><span class="nav-number">2.</span> <span class="nav-text">Setter的搜索模式（Search Pattern for the Basic Setter）</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SweetLoser</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">57.8k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'nsqlnUwzwCfJ7zrGNM69C5L8-gzGzoHsz',
        appKey: 'zpCVIjqIeJa5OOs6Rgbl65eU',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
